<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>SSPA生产质量管理看板</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" href="./css/index.css">
		<script src="js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/echarts.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/world.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/echarts-gl.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/vue.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/moment.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="js/common.js"></script>
		<script type="text/javascript" src="js/axios.js"></script>
		<script src="js/scroll.js" type="text/javascript" charset="utf-8"></script>
		<!-- <script src="js/style.js" type="text/javascript" charset="utf-8"></script> -->
	</head>

	<body>
		<div id="content">
			<div id="app"></div>
			<div class="header">
				<img src="image/kb_top_logo1.png" class="logoImg">
				<p class="logoTitle"> SSPA 生产数字平台 | Lean Digitzation System</p>
				<p class="line"></p>
			</div>
			<div class="leftBox">
				<div class="search">
					<el-row :gutter="20" type="flex" class="row-bg" justify="center">
						<el-col :span="7">
							<el-date-picker v-model="newDate" type="date" placeholder="请选择日期" @change="changeData" :picker-options="pickerOptions0"
							 style="width: 100%;">
							</el-date-picker>
						</el-col>
						<el-col :span="5">
							<el-select v-model="newShift" placeholder="请选择班次" @change="changeShift">
								<el-option v-for="item in optionsShift" :key="item.value" :label="item.label" :value="item.value"></el-option>
							</el-select>
						</el-col>
						<el-col :span="6">
							<el-select v-model="newLine" placeholder="请选择线体" @change="changeLine">
								<el-option v-for="item in optionsLine" :key="item.value" :label="item.label" :value="item.value"></el-option>
							</el-select>
						</el-col>
						<el-col :span="5" style="text-align: center;">
							<el-button icon="el-icon-search" type="success" style="width: 100%" @click="search">点击查询</el-button>
						</el-col>
					</el-row>

				</div>
				<div class="oneLeft">
					<div class="swiperTitle">
						<span class="mo30">线体</span>
						<span class="mo30">产量</span>
						<span class="mo35">KE</span>

					</div>
					<ul class="swiperData">
						<vue-seamless-scroll :data="tableData" :class-option="optionHoverOther" class="seamless-warp ">
							<li v-for="(item,index) in tableData" :key="index">
								<span class="mo30">{{item.linename}}</span>
								<span class="mo30">
									<el-tag type="success" effect="dark" v-if='item.goodparts>=195'>{{item.goodparts}} </el-tag>
									<b v-else='item.goodparts<195'>{{item.goodparts}} </b>
								</span>
								<span class="mo35">
									<el-tag type="danger" effect="dark"> {{(item.ke) * 100+ '%'}}</el-tag>
								</span>
							</li>
						</vue-seamless-scroll>
					</ul>
					<span class="border row1"></span>
					<span class="border row2"></span>
					<span class="border col1"></span>
					<span class="border col2"></span>
				</div>
			</div>

			<div class="centerBox">
				<div class="fourBigBox">
					<div class="fourBox">
						<div class="mycharts" id="myChart1"></div>
						<span class="border row1"></span>
						<span class="border row2"></span>
						<span class="border col1"></span>
						<span class="border col2"></span>
					</div>
					<div class="fourBox">
						<div class="mycharts" id="myChart2"></div>
						<span class="border row1"></span>
						<span class="border row2"></span>
						<span class="border col1"></span>
						<span class="border col2"></span>
					</div>
					<div class="fourBox">
						<div class="mycharts" id="myChart3"></div>
						<span class="border row1"></span>
						<span class="border row2"></span>
						<span class="border col1"></span>
						<span class="border col2"></span>
					</div>
					<div class="fourBox">
						<div class="mycharts" id="myChart4"></div>
						<span class="border row1"></span>
						<span class="border row2"></span>
						<span class="border col1"></span>
						<span class="border col2"></span>
					</div>
				</div>
				<div class="fiveBox">
					<div class="mycharts" id="myChart5"></div>
					<span class="border row1"></span>
					<span class="border row2"></span>
					<span class="border col1"></span>
					<span class="border col2"></span>
				</div>


			</div>

			<div class="rightBox">
				<div class="threeBox">
					<div class="mycharts" id="myChart6"></div>
					<span class="border row1"></span>
					<span class="border row2"></span>
					<span class="border col1"></span>
					<span class="border col2"></span>
				</div>
				<div class="threeBox">
					<div class="mycharts" id="myChart7"></div>
					<span class="border row1"></span>
					<span class="border row2"></span>
					<span class="border col1"></span>
					<span class="border col2"></span>
				</div>
				<div class="threeBox">
					<div class="mycharts" id="myChart8"></div>
					<span class="border row1"></span>
					<span class="border row2"></span>
					<span class="border col1"></span>
					<span class="border col2"></span>
				</div>
			</div>

		</div>

	</body>



</html>
<script type="text/javascript">
	let url = "http://192.168.1.18:9100"
	// let url = "http://10.177.34.15:9000"
	new Vue({
		el: '#content',
		data: {
			pickerOptions0: {
				disabledDate(time) {
					return time.getTime() > Date.now(); //如果没有后面的-8.64e7就是不可以选择今天的 
				}
			},
			// newDate: moment(new Date()).add('year', 0).format("YYYY-MM-DD"), //选择日期
			newDate: '2021-09-02', //选择日期
			newShift: '早班', //选择班次
			newLine: 'NW', //选择线体
			options: [],
			speedNum: 50,
			speedAll: 100,
			optionsLine: [], //线体
			optionsShift: [], //班次
			tableDataMo: [],
			tableData: [],
			dataOneBar: {
				dataOneBarX: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
				dataOneBar1: [2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3],
				dataOneBar2: [2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3],
				dataOneBar3: [2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4, 23.0, 16.5, 12.0, 6.2],
				dataOneBar4: [2.5, 2.8, 3.5, 4.8, 6.7, 10.8, 20, 24, 20, 15, 10, 6],
			},
			peopleData: [],
			dataThreeBar: {
				dataThreeBarX: ['大米', '玉米', '蔬菜', '鸡蛋', '坚果'],
				dataThreeBarY: [50000, 2000, 1000, 50000, 1000],
			},

			dataOnePie: [{
					value: 0,
					name: '正式工'
				},
				{
					value: 0,
					name: '小时工'
				},
			],
			dataTwoPie: [{
					value: 40,
					name: 'T1'
				},
				{
					value: 38,
					name: 'T2'
				},
				{
					value: 32,
					name: 'T3'
				},
				{
					value: 30,
					name: 'T4'
				},
				{
					value: 28,
					name: 'T5'
				},
			],

			KsData: [{
					name: "辅助检修",
					value: 124.5
				},
				{
					name: "领班",
					value: 222.5
				},
				{
					name: "车间培训员",
					value: 234.5
				},
				{
					name: "维修",
					value: 612.5
				},
				{
					name: "QC检测员",
					value: 548.7
				},
				{
					name: "IQC检测员",
					value: 300.2
				},
				{
					name: "仓库人员",
					value: 100
				},
			],
			// KsDataX: ['辅助检修', '领班', '车间培训员', '维修', 'QC检测员', 'IQC检测员', '仓库人员'],
			// KsDataY: ['100', '200', '300', '400', '500', '300', '122'],

			IeDataX: [
				'Useful Time', 'Cyclic + Frequentia', 'Design Time', 'Operator Activeity', ' DVC Externalto process',
				'Non Quality', 'Uncertaines', 'Operationg Time', 'DVC support', 'Time Spent'
			],
			IeDataY: [10, 50, 10, 35, 55, 30, 20, 55, 30, 20],
			IeDataY2: [15, 25, 40, 40, 26, 30, 20, 26, 30, 20],

			KeDataX: ['岗位培训', 'SIM1', '5S、交接班', 'Operator Activity', 'TPM1设备保养',
				'过程返工', '维修', '等待物料', '换型', '附加控制', 'MES系统维护'
			],
			KeDataY: [20, 50, 80, 30, 53, 56, 75, 86, 43, 35, 78],

		},
		computed: {
			optionHoverOther() {
				return {
					step: 0.3, // 数值越大速度滚动越快
					limitMoveNum: 15, // 开始无缝滚动的数据量 this.dataList.length
					hoverStop: true, // 是否开启鼠标悬停stop
					direction: 1, // 0向下 1向上 2向左 3向右
					openWatch: true, // 开启数据实时监控刷新dom
					singleHeight: 370, // 单步运动停止的高度(默认值0是无缝不停止的滚动) direction => 0/1
					waitTime: 10000 // 单步运动停止的时间(默认值1000ms)
				}
			}

		},
		methods: {



			//选择日期
			changeData(val) {
				this.newDate = moment(val).format("YYYY-MM-DD");
			},

			//选择班次
			changeShift(val) {
				this.newShift = val;
			},

			//选择线体
			changeLine(val) {
				this.newLine = val;
			},


			//查询按钮
			search() {
				this.centerTable()
			},

			//线体查询
			lineSearch() {
				let self = this
				axios.post(url + '/WebAPI/api/Common/GetProductLineTextIdText', {}).then(function(res) {
					if (res.status == 200) {
						let newList = []
						for (let [value, label] of Object.entries(res.data.list)) {
							newList.push({
								value: value,
								label: label.text,
							})
						}
						self.$nextTick(() => {
							self.optionsLine = newList
						})
					}
				})
			},

			//班次查询
			shiftSearch() {
				let self = this
				axios.post(url + '/WebAPI/api/Common/GetShiftinfoIdTextAll', {}).then(function(res) {
					if (res.status == 200) {
						let newList = []
						for (let [value, label] of Object.entries(res.data.list)) {
							newList.push({
								value: value,
								label: label.text,
							})
						}
						self.$nextTick(() => {
							self.optionsShift = newList
						})
					}
				})
			},

			//中间table表格初始化查询
			centerTable() {
				let self = this
				let params = {
					tsdate: this.newDate,
					shiftid: this.newShift,
					areaid: this.newLine,
				}
				axios.post(url + '/WebAPI/api/DashbordMain/List', params).then(function(res) {
					if (res.status == 200) {

						self.$nextTick(() => {
							//表格
							self.tableData = res.data.list.T1;
							//人数统计
							self.peopleData = Object.values(Array.from(res.data.list.T2T3)[0]).slice(0, 3);
							// //小时工和正式工
							self.dataOnePie[0].value = Object.values(Array.from(res.data.list.T2T3)[0]).slice(3, 4);
							self.dataOnePie[1].value = Object.values(Array.from(res.data.list.T2T3)[0]).slice(4, 5);
							// 类型消耗时间
							let T5dataX = []
							let T5dataY = []
							Array.from(res.data.list.T5).map(item => {
								T5dataX.push(item.downtime)
								T5dataY.push(item.usetime)
							});
							self.dataThreeBar.dataThreeBarX = T5dataX;
							self.dataThreeBar.dataThreeBarY = T5dataY;
							//T1-T5比例图
							let T6data = Array.from(res.data.list.T6).reduce((init, value, index) => {
								init.push({})
								init[index].value = value.usetime
								init[index].name = value.type
								return init
							}, [])
							self.dataTwoPie = T6data


							//电池ks时间分布图
							let T4data = Array.from(res.data.list.T4).reduce((init, value, index) => {
								init.push({})
								init[index].value = value.ts
								init[index].name = value.dttype
								return init
							}, [])
							self.KsData = T4data

							// let T4dataX = []
							// let T4dataY = []
							// Array.from(res.data.list.T4).map(item => {
							// 	T4dataX.push(item.dttype)
							// 	T4dataY.push(item.ts)
							// });
							// self.KsDataX = T4dataX;
							// self.KsDataY = T4dataY;


							//IE时间分布
							self.IeDataY2 = Object.values(Array.from(res.data.list.T7)[0]).slice(2, 12);
							// ke时间分布
							let T8dataX = []
							let T8dataY = []
							Array.from(res.data.list.T8).map(item => {
								T8dataX.push(item.downtimedec)
								T8dataY.push(item.usetime)
							});
							self.KeDataX = T8dataX;
							self.KeDataY = T8dataY;
							//图9
							let T9data1 = []
							let T9data2 = []
							let T9data3 = []
							let T9data4 = []
							Array.from(res.data.list.T9).map(item => {
								T9data1.push(item.ke)
								T9data2.push(item.ie)
								T9data3.push(item.targetke)
								T9data4.push(item.targetie)
							});
							console.log('T9data3', T9data3)
							self.dataOneBar.dataOneBar1 = T9data1
							self.dataOneBar.dataOneBar2 = T9data2
							self.dataOneBar.dataOneBar3 = T9data3
							self.dataOneBar.dataOneBar4 = T9data4


							self.myChart1()
							self.myChart2()
							self.myChart3()
							self.myChart4()
							self.myChart5()
							self.myChart6()
							self.myChart7()
							self.myChart8()
						})

					}
				})


			},


			myChart1() {
				// 基于准备好的dom，初始化echarts实例
				var myChart1 = echarts.init(document.getElementById('myChart1'));

				var placeHolderStyle = {
					normal: {
						label: {
							show: false
						},
						labelLine: {
							show: false
						},
						color: "rgba(0,0,0,0)",
						borderWidth: 0
					},
					emphasis: {
						borderWidth: 0
					}
				};


				var dataStyle = {
					normal: {
						formatter: '{c}人',
						position: 'center',
						show: true,
						textStyle: {
							fontSize: '15',
							fontWeight: 'normal',
							color: '#AAAFC8',
							fontFamily: 'cursive',
						}
					}
				};


				option = {

					title: [{
							text: '人数统计',
							left: 'center',
							y: '10px', //垂
							textStyle: { //主标题文本样式
								fontSize: 18,
								color: "#37CC48",
								fontFamily: 'cursive',
							},
						},

						{
							text: '计划人数',
							left: '60%',
							top: '25%',
							textAlign: 'center',
							textStyle: {
								fontWeight: 'normal',
								fontSize: '15',
								color: '#fff',
								textAlign: 'center',
								fontFamily: 'cursive',
							},
						}, {
							text: '排班人数',
							left: '60%',
							top: '50%',
							textAlign: 'center',
							textStyle: {
								color: '#fff',
								fontWeight: 'normal',
								fontSize: '15',
								textAlign: 'center',
								fontFamily: 'cursive',
							},
						}, {
							text: '实际人数',
							left: '60%',
							top: '75%',
							textAlign: 'center',
							textStyle: {
								color: '#fff',
								fontWeight: 'normal',
								fontSize: '15',
								textAlign: 'center',
								fontFamily: 'cursive',
							},
						}
					],

					//第一个图表
					series: [{
							type: 'pie',
							hoverAnimation: false, //鼠标经过的特效
							radius: ['20%', '25%'],
							center: ['30%', '30%'],
							startAngle: 225,
							labelLine: {
								normal: {
									show: false
								}
							},
							label: {
								normal: {
									position: 'center'
								}
							},
							data: [{
									value: 100,
									itemStyle: {
										normal: {
											color: ['rgba(176, 212, 251, 0.3)']
										}
									},
								}, {
									value: 35,
									itemStyle: placeHolderStyle,
								},

							]
						},
						//上层环形配置
						{
							type: 'pie',
							hoverAnimation: false, //鼠标经过的特效
							radius: ['20%', '25%'],
							center: ['30%', '30%'],
							startAngle: 225,
							labelLine: {
								normal: {
									show: false
								}
							},
							label: {
								normal: {
									position: 'center'
								}
							},
							data: [{
									value: this.peopleData[0],
									"itemStyle": {
										"normal": {
											"color": new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
												"offset": 0,
												"color": '#37CC48'
											}, {
												"offset": 1,
												"color": '#ffff66'
											}]),
										}
									},
									label: dataStyle,
								}, {
									value: 35,
									itemStyle: placeHolderStyle,
								},

							]
						},


						//第二个图表
						{
							type: 'pie',
							hoverAnimation: false,
							radius: ['20%', '25%'],
							center: ['30%', '58%'],
							startAngle: 225,
							labelLine: {
								normal: {
									show: false
								}
							},
							label: {
								normal: {
									position: 'center'
								}
							},
							data: [{
									value: 100,
									itemStyle: {
										normal: {
											color: ['rgba(176, 212, 251, 0.3)']
										}
									},

								}, {
									value: 35,
									itemStyle: placeHolderStyle,
								},

							]
						},

						//上层环形配置
						{
							type: 'pie',
							hoverAnimation: false,
							radius: ['20%', '25%'],
							center: ['30%', '58%'],
							startAngle: 225,
							labelLine: {
								normal: {
									show: false
								}
							},
							label: {
								normal: {
									position: 'center'
								}
							},
							data: [{
									value: this.peopleData[1],
									"itemStyle": {
										"normal": {
											"color": new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
												"offset": 0,
												"color": '#37CC48'
											}, {
												"offset": 1,
												"color": '#CACED3'

											}]),
										}
									},
									label: dataStyle,
								}, {
									value: 55,
									itemStyle: placeHolderStyle,
								},

							]
						},
						//第三个图表
						{
							type: 'pie',
							hoverAnimation: false,
							radius: ['20%', '25%'],
							center: ['30%', '83%'],
							startAngle: 225,
							labelLine: {
								normal: {
									show: false
								}
							},
							label: {
								normal: {
									position: 'center'
								}
							},
							data: [{
									value: 100,
									itemStyle: {
										normal: {
											color: ['rgba(176, 212, 251, 0.3)']
										}
									},

								}, {
									value: 35,
									itemStyle: placeHolderStyle,
								},

							]
						},

						//上层环形配置
						{
							type: 'pie',
							hoverAnimation: false,
							radius: ['20%', '25%'],
							center: ['30%', '83%'],
							startAngle: 225,
							labelLine: {
								normal: {
									show: false
								}
							},
							label: {
								normal: {
									position: 'center'
								}
							},
							data: [{
									value: this.peopleData[2],
									"itemStyle": {
										"normal": {
											"color": new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
												"offset": 0,
												"color": '#CACED3'
											}, {
												"offset": 1,
												"color": '#ffff66'
											}]),
										}
									},
									label: dataStyle,
								}, {
									value: 55,
									itemStyle: placeHolderStyle,
								},

							]
						},
					]
				};
				myChart1.setOption(option);
				window.onresize = function() {
					myChart1.resize();
				}
			},

			//类型消耗时间总和
			myChart2() {
				// 基于准备好的dom，初始化echarts实例
				var myChart2 = echarts.init(document.getElementById('myChart2'));
				// 指定图表的配置项和数据
				var option = {
					title: {
						text: '类型消耗时间总和',
						left: 'center',
						y: '10px', //垂
						textStyle: { //主标题文本样式
							fontSize: 18,
							fontFamily: 'cursive',
							color: "#37CC48"
						}
					},
					grid: {
						left: '10%',
						right: '10%',
						bottom: '0%',
						top: '20%',
						containLabel: true
					},
					tooltip: {
						trigger: 'axis',
						axisPointer: {
							type: 'none'
						},
						formatter: function(params) {
							return params[0].name + '<br/>' +
								"<span style='display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgba(36,207,233,0.9)'></span>" +
								params[0].seriesName + ' : ' + Number((params[0].value).toFixed(2)).toLocaleString() +
								' 小时<br/>'
						}
					},

					xAxis: {
						show: false,
						type: 'value'
					},
					yAxis: [{
						type: 'category',
						inverse: true,
						axisLabel: {
							show: true,
							textStyle: {
								color: '#fff'
							},
						},
						splitLine: {
							show: false
						},
						axisTick: {
							show: false
						},
						axisLine: {
							show: false
						},
						data: this.dataThreeBar.dataThreeBarX
					}, {
						type: 'category',
						inverse: true,
						axisTick: 'none',
						axisLine: 'none',
						show: true,
						axisLabel: {
							textStyle: {
								color: '#ffffff',
								fontSize: '13',
								fontFamily: 'cursive',
							},
							formatter: function(value) {
								return value + '小时';
							},
						},
						data: this.dataThreeBar.dataThreeBarY
					}],
					series: [{
							name: '时间',
							type: 'bar',
							zlevel: 1,
							itemStyle: {
								normal: {
									barBorderRadius: 30,
									color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
										offset: 0,
										color: 'rgb(255,255,102,1)',
									}, {
										offset: 1,
										color: 'rgb(55,204,72,1)'
									}]),
								},
							},
							barWidth: 12,
							data: this.dataThreeBar.dataThreeBarY
						},
						{
							name: '背景',
							type: 'bar',
							barWidth: 10,
							barGap: '-100%',
							data: this.dataThreeBar.dataThreeBarY,
							itemStyle: {
								normal: {
									color: 'rgba(24,31,68,1)',
									barBorderRadius: 30,
								}
							},
						},
					]
				};
				// 使用刚指定的配置项和数据显示图表。
				myChart2.setOption(option);
				window.onresize = function() {
					myChart2.resize();
				}
			},



			//正式工和小时工环比
			myChart3() {
				// 基于准备好的dom，初始化echarts实例
				var myChart3 = echarts.init(document.getElementById('myChart3'));
				// 指定图表的配置项和数据
				var option = {
					title: {
						text: '小时工和正式工出勤小时比',
						left: 'center',
						y: '10px', //垂
						textStyle: { //主标题文本样式
							fontSize: 18,
							color: '#37CC48',
							fontFamily: 'cursive',
						}
					},
					color: ['#00aa00', '#CBCFD4'],
					tooltip: {
						trigger: 'item',
						formatter: "{a} <br/>{b} : {c} ({d}%)"
					},
					legend: {
						left: 'center',
						y: '40px',
						textStyle: { //图例文字的样式
							color: '#fff',
							fontSize: 15,
							fontFamily: 'cursive',
						},
						itemWidth: 13, // 设置宽度
						itemHeight: 13, // 设置高度
						itemGap: 10 // 设置间距
					},

					series: [{
						name: '所占比例',
						type: 'pie',
						radius: '45%',
						center: ["50%", "60%"],
						data: this.dataOnePie

					}]
				};
				// 使用刚指定的配置项和数据显示图表。
				myChart3.setOption(option);
				window.onresize = function() {
					myChart3.resize();
				}
			},

			//T1-T5比例图
			myChart4() {
				// 基于准备好的dom，初始化echarts实例
				var myChart4 = echarts.init(document.getElementById('myChart4'));
				// 指定图表的配置项和数据
				var option = {
					title: {
						text: 'T1-T5比例图',
						left: 'center',
						y: '5px', //垂
						textStyle: { //主标题文本样式
							fontSize: 18,
							fontFamily: 'cursive',
							color: "#37CC48"
						}
					},
					color: ['#00aa00', '#CBCFD4', '#ffff66', '#ff5500', '#55ffff', ],
					tooltip: {
						trigger: 'item',
						formatter: "{a} <br/>{b} : {c} ({d}%)"
					},
					legend: {
						left: 'center',
						y: '40px',
						textStyle: { //图例文字的样式
							color: '#fff',
							fontSize: 15,
							fontFamily: 'cursive',
						},
						itemWidth: 12, // 设置宽度
						itemHeight: 12, // 设置高度
						itemGap: 7 // 设置间距
					},
					series: [{
						name: '所占比例',
						type: 'pie',
						radius: [40, 65],
						center: ['50%', '60%'],
						roseType: 'area',
						itemStyle: {
							borderRadius: 8
						},
						data: this.dataTwoPie
					}]
				};
				// 使用刚指定的配置项和数据显示图表。
				myChart4.setOption(option);
				window.onresize = function() {
					myChart4.resize();
				}
			},

			//ks时间分布图
			myChart5() {
				var myChart5 = echarts.init(document.getElementById('myChart5'));
				// var total = 1000; // 数据总数
				// var datas = [];
				// this.KsData.forEach(value => {
				// 	datas.push(value.value);
				// });
				// option = {
				// 	title: {
				// 		text: 'KS distribution by item (Hrs)/KS时间分布图',
				// 		left: 'center',
				// 		y: '5px', //垂
				// 		textStyle: { //主标题文本样式
				// 			fontSize: 18,
				// 			fontFamily: 'cursive',
				// 			color: "#37CC48"
				// 		}
				// 	},
				// 	xAxis: {
				// 		max: total,
				// 		splitLine: {
				// 			show: false
				// 		},
				// 		axisLine: {
				// 			show: false
				// 		},
				// 		axisLabel: {
				// 			show: false
				// 		},
				// 		axisTick: {
				// 			show: false
				// 		},
				// 	},
				// 	grid: {
				// 		left: '20%',
				// 		right: '15%',
				// 		top: '15%',
				// 		bottom: '0%',
				// 	},
				// 	yAxis: [{
				// 		type: "category",
				// 		inverse: false,
				// 		data: this.KsData,
				// 		axisLine: {
				// 			show: false
				// 		},
				// 		axisTick: {
				// 			show: false
				// 		},
				// 		axisLabel: {
				// 			show: false
				// 		},


				// 	}],
				// 	series: [{
				// 			// 内
				// 			type: "bar",
				// 			barWidth: 12,
				// 			silent: true,
				// 			itemStyle: {
				// 				normal: {
				// 					color: {
				// 						colorStops: [{
				// 								offset: 0,
				// 								color: '#00aa00', // 0% 处的颜色
				// 							},
				// 							{
				// 								offset: 1,
				// 								color: 'red', // 100% 处的颜色
				// 							},
				// 						],
				// 					},

				// 				},
				// 			},
				// 			label: {
				// 				normal: {
				// 					formatter: "{b}",
				// 					textStyle: {
				// 						color: "#fff",
				// 						fontSize: 15,
				// 						fontFamily: 'cursive',
				// 					},
				// 					position: 'left',
				// 					distance: 20, // 向右偏移位置
				// 					show: true
				// 				}
				// 			},
				// 			data: this.KsData,
				// 			z: 1,
				// 			animationEasing: "elasticOut"
				// 		},

				// 		{
				// 			// 分隔
				// 			type: "pictorialBar",
				// 			itemStyle: {
				// 				normal: {
				// 					color: "#07314a"
				// 				}
				// 			},
				// 			symbolRepeat: "fixed",
				// 			symbolMargin: 1.5,
				// 			symbol: "rect",
				// 			symbolClip: true,
				// 			symbolSize: [5, 15],
				// 			symbolPosition: "start",
				// 			symbolOffset: [3, -3],
				// 			symbolBoundingData: this.total,
				// 			// data: [total, total, total],
				// 			data: JSON.stringify(Array(3).join('total0').split('0').filter(item=>item!='')).replace (/"/g,""),
				// 			z: 2,
				// 			animationEasing: "elasticOut",
				// 		},
				// 		{
				// 			// label
				// 			type: "pictorialBar",
				// 			symbolBoundingData: total,
				// 			itemStyle: {
				// 				normal: {
				// 					color: "none"
				// 				}
				// 			},
				// 			label: {
				// 				normal: {
				// 					formatter: (params) => {
				// 						var text;
				// 						text = '{f| ' + (params.data * 100 / total).toFixed(2) + '%}';
				// 						return text;
				// 					},
				// 					rich: {
				// 						f: {
				// 							color: "#ffffff"
				// 						}
				// 					},
				// 					position: 'right',
				// 					distance: 20, // 向右偏移位置
				// 					show: true
				// 				}
				// 			},
				// 			data: datas,
				// 			z: 0,

				// 		},

				// 		{
				// 			name: "外框",
				// 			type: "bar",
				// 			barGap: "-130%", // 设置外框粗细
				// 			// data: [total, total, total ],
				// 			data: JSON.stringify(Array(3).join('total0').split('0').filter(item=>item!='')).replace (/"/g,""),
				// 			barWidth: 20,
				// 			itemStyle: {
				// 				normal: {
				// 					barBorderRadius: 5,
				// 					color: "transparent", // 填充色
				// 					barBorderColor: "#00aa00", // 边框色
				// 					barBorderWidth: 1, // 边框宽度
				// 				}
				// 			},
				// 			z: 0
				// 		},
				// 		{
				// 			type: 'scatter',
				// 			name: '条形',
				// 			symbol: 'roundRect',
				// 			symbolSize: [5, 10],
				// 			symbolOffset: [5, -3],
				// 			symbolKeepAspect: true,
				// 			itemStyle: {
				// 				normal: {
				// 					color: "#00aa00"
				// 				}
				// 			},
				// 			// data: [total, total, total],
				// 			data: JSON.stringify(Array(3).join('total0').split('0').filter(item=>item!='')).replace (/"/g,""),
				// 		}

				// 	]
				// }
				let list = this.KsData;
				let yName = list.map((item) => item.name);
				let xData = list.map((item) => item.value);
				let barWidth = 15;
				option = {
					title: {
						text: 'KS distribution by item (Hrs)/KS时间分布图',
						left: 'center',
						y: '5px', //垂
						textStyle: { //主标题文本样式
							fontSize: 15,
							fontFamily: 'cursive',
							color: "#37CC48"
						}
					},
					grid: {
						left: '20%',
						right: '15%',
						top: '15%',
						bottom: '0%',
					},

					xAxis: {
						splitLine: {
							show: false
						},
						axisTick: {
							show: false
						},
						axisLine: {
							show: false
						},
						axisLabel: {
							show: false
						}
					},
					yAxis: {
						splitLine: {
							show: false
						},
						axisTick: {
							show: false
						},
						axisLine: {
							show: false
						},
						axisLabel: {
							color: '#fff',
							fontSize: 15
						},
						  data: yName,
					},
					 series: [{ //内
					             type: 'bar',
					             barWidth,
					             legendHoverLink: false,
					             symbolRepeat: true,
					             silent: true,
					             itemStyle: {
					                 color: {
					                     type: 'linear',
					                     x: 0,
					                     y: 0,
					                     x2: 1,
					                     y2: 0,
					                     colorStops: [{
					                         offset: 0,
					                         color: '#00aa00' // 0% 处的颜色
					                     }, {
					                         offset: 1,
					                         color: 'red' // 100% 处的颜色
					                     }]
					                 }
					             },
					             data: list,
					             z: 1,
					             animationEasing: 'elasticOut'
					         },
					         { // 背景
					             type: 'pictorialBar',
					             animationDuration: 0,
					             symbolRepeat: 'fixed',
					             symbolMargin: '15%',
					             symbol: 'roundRect',
					             symbolSize: [4, barWidth],
					             itemStyle: {
					                 normal: {
					                     color: '#12272A',
					 
					                 }
					             },
					             label: {
					                 normal: {
					                     show: true,
					                     position: 'right',
					                     offset: [0, 2],
					                     distance: 30,
					                     textStyle: {
					                         color: '#ffffff',
					                         fontSize: 15,
											 fontFamily: 'cursive',
					                     },
					                     formatter: function(a, b) {
					                         return `${a.value}%`
					                     }
					                 },
					 
					             },
					             data: xData,
					             z: 0,
					             animationEasing: 'elasticOut'
					         },
					         { //分隔
					             type: 'pictorialBar',
					             itemStyle: {
					                 color: '#000'
					             },
					             symbolRepeat: 'fixed',
					             symbolMargin: 2,
					             symbol: 'roundRect',
					             symbolClip: true,
					             symbolSize: [2, barWidth],
					             symbolPosition: 'start',
					             symbolOffset: [0, 0],
					             data: list,
					             z: 2,
					             animationEasing: 'elasticOut'
					         },	
					  ]
				};

				// 使用刚指定的配置项和数据显示图表。
				myChart5.setOption(option);
				window.onresize = function() {
					myChart5.resize();
				}
			},


			//IE时间分布图
			myChart6() {
				var myChart6 = echarts.init(document.getElementById('myChart6'));
				var color = ["#CC00FF", "#FFC0CB", "#FF69B4", "#DDA0DD", "#FF00FF", "#9400D3", "#8A2BE2"]
				option = {
					title: {
						text: 'IE distribution by item (Hrs)/IE 时间分布图',
						left: 'center',
						y: '7px', //垂
						textStyle: { //主标题文本样式
							fontSize: 18,
							color: "#37CC48",
							fontFamily: 'cursive',
						}
					},
					grid: {
						containLabel: true,
						left: "8%",
						right: "3%",
						top: "20%",
						bottom: "-5%",

					},
					xAxis: {
						type: "category",
						data: this.IeDataX,
						axisLine: {
							lineStyle: {
								color: "#fff",
							},
						},
						axisLabel: {
							interval: 0,
							rotate: 30,

						},
					},
					yAxis: {
						type: "value",
						axisLine: {
							show: false,
							lineStyle: {
								color: "#fff",
							},
						},
						splitLine: {
							show: false,

						},
						axisLabel: {
							show: false,
						},
						axisTick: {
							show: false //不显示坐标轴刻度
						},
					},
					series: [{
							type: "bar",
							type: "bar",
							data: this.IeDataY,
							stack: "zs",
							barMaxWidth: "auto",
							barWidth: 20,
							itemStyle: {
								color: {
									x: 0,
									y: 0,
									x2: 0,
									y2: 1,
									type: "linear",
									global: false,
									colorStops: [{
											offset: 0,
											color: "transparent",
										},
										{
											offset: 1,
											color: "transparent",
										},
									],
								},
							},
						},

						{
							"type": "bar",
							data: this.IeDataY2,
							stack: "zs",
							type: "bar",
							barMaxWidth: "auto",
							barWidth: 20,
							itemStyle: {
								normal: {
									color: function(params) {
										let colorList = [
											"#c23531",
											"#61a0a8",
											"#d48265",
											"#91c7ae",
											"#ca8622",
											"#bda29a",
											"#00aa00",
											"#4BABDE",
											"#FFDE76",
											"#37A2DA"
										];
										return colorList[params.dataIndex];
									},
									label: {
										show: true, //开启显示
										position: 'top', //在上方显示
										textStyle: { //数值样式
											color: '#fff',
											fontSize: 16
										}
									}
								},

							},
						},


					],
				};

				myChart6.setOption(option);
				window.onresize = function() {
					myChart6.resize();
				}
			},


			//ke柱状图折线图
			myChart7() {
				// 基于准备好的dom，初始化echarts实例
				var myChart7 = echarts.init(document.getElementById('myChart7'));

				var maxArr = [100, 100];
				option = {
					title: {
						text: 'KE Distribution by item (Hrs)/KE时间分布',
						left: 'center',
						y: '5px', //垂
						textStyle: { //主标题文本样式
							fontSize: 18,
							fontFamily: 'cursive',
							color: "#37CC48"
						}
					},
					tooltip: {
						trigger: "axis",
						borderRadius: 5,
						borderColor: "#6baab2",
						borderWidth: 1,
						formatter: function(params) {
							return (
								"小时(个) :" +
								params[0].value
							);
						}
					},
					grid: {
						left: "3%",
						right: "3%",
						bottom: "0%",
						top: "30%",
						containLabel: true
					},
					xAxis: {
						data: this.KeDataX,
						triggerEvent: true,
						axisTick: {
							show: true
						},
						axisLine: {
							show: true,
							lineStyle: {
								color: '#fff'
							}

						},
						axisLabel: {
							rotate: 25,
							interval: 0,
							textStyle: {
								color: "#fff"
							}
						}
					},
					yAxis: {
						name: "个数",
						triggerEvent: true,
						nameTextStyle: {
							color: "#fff",
							fontSize: 14,
							fontFamily: 'cursive',

						},
						splitLine: {
							show: false,

						},
						axisTick: {
							show: true
						},
						axisLine: {
							show: true,
							lineStyle: {
								color: '#fff'
							}
						},
						axisLabel: {
							show: true,
							textStyle: {
								color: "#fff",
							}
						}
					},
					series: [{
							name: "hill",
							barMinHeight: 10,
							type: "pictorialBar",
							barCategoryGap: "60%",
							// symbol: 'path://M0,10 L10,10 L5,0 L0,10 z',
							symbol: "path://M0,10 L10,10 C5.5,10 5.5,5 5,0 C4.5,5 4.5,10 0,10 z",
							itemStyle: {
								normal: {
									//barBorderRadius: 5,
									//渐变色
									color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
											offset: 0,
											color: "#01EAED"
										},
										{
											offset: 0.5,
											color: "#02C4DD"
										},
										{
											offset: 1,
											color: "#029ED9"
										}
									])
								}
							},
							label: {
								normal: {
									show: true,
									position: "top",
									textStyle: {
										color: "#fff",
										fontSize: 15,
										fontFamily: 'cursive',
									}
								}
							},
							data: this.KeDataY,
							z: 10
						},
						{
							name: "hill",
							type: "bar",
							barWidth: '20%',
							symbol: "path://M0,10 L10,10 C5.5,10 5.5,5 5,0 C4.5,5 4.5,10 0,10 z",
							itemStyle: {
								normal: {
									color: "rgba(11,47,68,.8)"
								}
							},
							data: this.KeDataX,
							z: 9
						}
					]
				}

				myChart7.setOption(option);
				window.onresize = function() {
					myChart7.resize();
				}

			},


			myChart8() {
				// 基于准备好的dom，初始化echarts实例
				var myChart8 = echarts.init(document.getElementById('myChart8'));
				// 指定图表的配置项和数据
				var option = {
					title: {
						text: '柱状图折线图',
						left: 'center',
						y: '5px', //垂
						textStyle: { //主标题文本样式
							fontSize: 18,
							color: "#37CC48",
							fontFamily: 'cursive',
						}
					},
					color: ['#00aa00', '#CBCFD4', '#ff5500', '#55ffff', ],
					grid: {
						left: '10%',
						right: '10%',
						top: '40%',
						bottom: '15%',
					},
					tooltip: {
						trigger: 'axis',
						axisPointer: {
							type: 'cross',
							crossStyle: {
								color: 'fff'
							}
						}
					},


					legend: {
						data: ['IE', 'KE', '目标IE', '目标KE'],
						left: 'center',
						y: '40px',
						textStyle: { //图例文字的样式
							color: '#fff',
							fontSize: 15,
							fontFamily: 'cursive',
						},
						itemWidth: 14, // 设置宽度
						itemHeight: 14, // 设置高度
						itemGap: 10 // 设置间距
					},
					xAxis: [{
						type: 'category',
						data: this.dataOneBar.dataOneBarX,
						axisPointer: {
							type: 'shadow',
						},
						axisLabel: {
							textStyle: {
								color: '#fff'
							},

						},
						axisLine: {
							lineStyle: {
								color: '#fff',
								width: 2, //这里是为了突出显示加上的
							},
						},
					}],
					yAxis: [{
							type: 'value',
							name: '个数',
							min: 0,
							max: 250,
							interval: 50,
							nameTextStyle: {
								color: "#fff",
								fontSize: 12,
							},
							axisLabel: {
								formatter: '{value}',
								textStyle: {
									color: '#fff'
								},
							},
							axisLine: {
								lineStyle: {
									color: '#fff',
									width: 1, //这里是为了突出显示加上的
								}
							},

							splitLine: { //网格线
								show: false
							}

						},

						{
							type: 'value',
							name: '%',
							nameTextStyle: {
								color: "#fff",
								fontSize: 15,
								fontFamily: 'cursive',
							},
							min: 0,
							max: 25,
							interval: 5,
							axisLabel: {
								formatter: '{value} %',
								textStyle: {
									color: '#fff'
								}
							},
							axisLine: {
								lineStyle: {
									color: '#fff',
									width: 1, //这里是为了突出显示加上的
								}
							},

							splitLine: { //网格线
								show: false
							}

						},
					],
					series: [{
							name: 'IE',
							type: 'bar',
							data: this.dataOneBar.dataOneBar1
						},
						{
							name: 'KE',
							type: 'bar',
							data: this.dataOneBar.dataOneBar2
						},
						{
							name: '目标IE',
							type: 'line',
							// yAxisIndex: 1,
							data: this.dataOneBar.dataOneBar3
						},
						{
							name: '目标KE',
							type: 'line',
							// yAxisIndex: 1,
							data: this.dataOneBar.dataOneBar4
						}
					]

				};
				// 使用刚指定的配置项和数据显示图表。
				myChart8.setOption(option);
				window.onresize = function() {
					myChart8.resize();
				}
			},

		},
		mounted() {
			//线体查询
			this.lineSearch()
			//班次查询
			this.shiftSearch()
			//初始化中间表格查询
			this.centerTable()




			/***** 当前时间  *****/
			function getNowFormatDate() { //yyyy-MM-dd HH:MM:SS
				var date = new Date();
				var month = date.getMonth() + 1;
				var strDate = date.getDate();
				var hours = date.getHours();
				var minutes = date.getMinutes();
				var seconds = date.getSeconds();
				if (month >= 1 && month <= 9) {
					month = "0" + month;
				}
				if (strDate >= 1 && strDate <= 9) {
					strDate = "0" + strDate;
				}
				if (hours >= 0 && hours <= 9) {
					hours = "0" + hours;
				}
				if (minutes >= 0 && minutes <= 9) {
					minutes = "0" + minutes;
				}
				if (seconds >= 0 && seconds <= 9) {
					seconds = "0" + seconds;
				}
				var currentdate = date.getFullYear() + "-" + month + "-" + strDate + " " + hours + ":" + minutes + ":" +
					seconds;
				return currentdate;
			}
			setInterval(function() {
				var time = getNowFormatDate();
				$('.time').html(time)
			}.bind(this), 1000)
		}


	})
</script>
